<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ספריית הטעינות שלי - GitHub Pages</title>
    <style>
        :root {
            --primary: #3498db;
            --bg: #121212;
            --card: #1e1e1e;
            --text: #ffffff;
        }

        body { font-family: system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        
        .loader-card {
            background: var(--card);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            border: 1px solid #333;
        }

        .preview-window {
            height: 150px;
            background: #000;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        /* זה האלמנט שיציג את ה-HTML או ה-GIF */
        .preview-frame { border: none; width: 100%; height: 100%; }
        .preview-img { max-width: 80%; max-height: 80%; object-fit: contain; }

        .controls { display: flex; flex-direction: column; gap: 8px; font-size: 14px; }
        .row { display: flex; justify-content: space-between; align-items: center; }
        
        .btn-group { display: flex; gap: 10px; margin-top: 15px; }
        button { flex: 1; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; }
        .btn-dl { background: #27ae60; }
        .btn-op { background: #2980b9; }
    </style>
</head>
<body>

    <h1 style="text-align: center;">Library Loaders</h1>
    <div class="grid" id="mainGrid"></div>

<script>
    /* ב-GitHub Pages עליך לעדכן את הרשימה הזו ידנית בכל פעם שאתה מוסיף קובץ לתיקיית loaders.
       סוג: 'html' או 'gif'
    */
    const loaders = [
        { name: 'ספינר קלאסי', file: 'spinner.html', type: 'html' },
        { name: 'טעינה צבעונית', file: 'rainbow.gif', type: 'gif' },
        { name: 'נקודות קופצות', file: 'dots.html', type: 'html' }
    ];

    function init() {
        const grid = document.getElementById('mainGrid');
        
        loaders.forEach((loader, index) => {
            const path = `loaders/${loader.file}`;
            const card = document.createElement('div');
            card.className = 'loader-card';
            
            card.innerHTML = `
                <div class="preview-window" id="prev-${index}">
                    ${loader.type === 'html' 
                        ? `<iframe class="preview-frame" src="${path}"></iframe>` 
                        : `<img class="preview-img" src="${path}">`
                    }
                </div>
                <h3>${loader.name}</h3>
                <div class="controls">
                    <div class="row">
                        <label>צבע (HTML בלבד):</label>
                        <input type="color" oninput="updateColor(${index}, this.value)">
                    </div>
                    <div class="row">
                        <label>גודל:</label>
                        <input type="range" min="20" max="150" value="60" oninput="updateSize(${index}, this.value)">
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn-dl" onclick="downloadFile('${path}')">הורדה</button>
                    <button class="btn-op" onclick="window.open('${path}', '_blank')">פתיחה</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // פונקציות השליטה
    function updateColor(index, color) {
        const frame = document.querySelector(`#prev-${index} iframe`);
        if (frame) {
            // שולח הודעה לתוך ה-iframe כדי לשנות צבע (דורש שה-HTML ב-loaders יתמוך בזה)
            frame.contentWindow.postMessage({ type: 'COLOR', value: color }, '*');
            // גיבוי למקרה שה-HTML פשוט:
            frame.style.filter = `hue-rotate(${Math.random() * 360}deg)`; 
        }
    }

    function updateSize(index, size) {
        const target = document.querySelector(`#prev-${index} iframe, #prev-${index} img`);
        if (target) {
            target.style.width = size + 'px';
            target.style.height = size + 'px';
        }
    }

    function downloadFile(path) {
        const a = document.createElement('a');
        a.href = path;
        a.download = path.split('/').pop();
        a.click();
    }

    window.onload = init;
</script>
</body>
</html>